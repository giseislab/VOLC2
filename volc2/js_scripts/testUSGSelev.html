<html>
<head>
<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAA7CvIzup6XDkRQTw8e1JceRTRbnjL2NLPWbDbp2tCipxMtcX7VRS8NcDNcXAtdj6dmT63NAJWAlytkA" type="text/javascript"></script>
<script src = "http://www.pnsn.org/req2/js_scripts/prototype-1.6.0.2.js"  type="text/javascript"></script>
<script src = "http://www.pnsn.org/req2/js_scripts/scriptaculous.js" type="text/javascript"></script>
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
</head>
<body>
<div id="test">
<h2>Click to let AJAX change this text</h2>
</div>
<button type="button" onclick="loadXMLDoc(url)">Click Me</button>

<script type="text/javascript">
var address = "http://gisdata.usgs.gov/XMLWebServices2/Elevation_Service.asmx/getElevation?X_Value=";
//var address = "XMLWebServices2/Elevation_Service.asmx/getElevation?X_Value=";

lat = 48.777;
lng = -121.813;
units = "METERS";
url = address+lng+"&Y_Value="+lat+"&Elevation_Units="+units+"&Source_Layer=-1&Elevation_Only=true";

// loadXMLDoc(url)
// new Ajax.Request(url, {
//   method:  'get',
//   //host: gisdata.usgs.gov
//   onSuccess:  function(response){
//     //alert(response.responseText);
//     document.getElementById('test').innerHTML="<h2>" + xml.responseText + "</h2>";
//   },
//   onFailure:  function(){
//     alert('ERROR');
//   }
// });
// }

//var req;

//function loadXMLDoc(url) {
//	req = false;
    // branch for native XMLHttpRequest object
//    if(window.XMLHttpRequest && !(window.ActiveXObject)) {
//    	try {
//			req = new XMLHttpRequest();
//        } catch(e) {
//			req = false;
//        }
    // branch for IE/Windows ActiveX version
//    } else if(window.ActiveXObject) {
//       	try {
//        	req = new ActiveXObject("Msxml2.XMLHTTP");
//      	} catch(e) {
//        	try {
//          		req = new ActiveXObject("Microsoft.XMLHTTP");
//        	} catch(e) {
//          		req = false;
//        	}
//		}
//    }
//	if(req) {
//		req.onreadystatechange = processReqChange;
//		req.open("GET", url, true);
//		req.send("");
//		if (req.readyState == 4) {
        // only if "OK"
//        if (req.status == 200) {
//        	elev = req.documentElement.getElementsByTagName("elevation");
//            document.getElementById('test').innerHTML="<h2>" + elev + "</h2>";
//        } else {
//            alert("There was a problem retrieving the XML data:\n" +
//                req.statusText);
//        }
//    }
//	}
//}

GDownloadUrl(url, function(data) {
		var xml = GXml.parse(data);
		var elev = parseInt(GXml.value(xml)); 
		//This is the returned value if no data is available
        if(elev=="-32768"){
                 var retval = "N/A";
         }else{
                 var retval = elev + " m.";
                 document.getElementById('test').innerHTML="<h2>"+retval+"</h2>";
         }
  });

</script>
</body>
</html>